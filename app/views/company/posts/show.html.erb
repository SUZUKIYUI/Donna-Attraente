<h1>作品詳細画面（企業用）</h1>

<%= attachment_image_tag @post, :post_image, :fill, 300, 400 %>

<%= link_to company_design_contributor_path(@post.design_contributor_id) do %>
  <%= attachment_image_tag @post.design_contributor, :profile_image, :fill, 100, 100 %>
  <%= @post.design_contributor.pen_name %>
<% end %>
<p>作者コメント</p>
<%= @post.author_comment %>
<%= @post.created_at.strftime('%Y/%m/%d %H:%M') %><span>公開</span>
<!---------------------------------------------------------------->
<p>なにこれ欲しい<span>☆</span></p>
<span>★</span><%= @post.wants.count %>
<!-------------------------------コメント一覧--------------------------------->
<p>コメント一覧</p>
<% @post.comments.each do |comment| %>
  <%= link_to company_design_contributor_path(comment.design_contributor_id) do %>
    <%= attachment_image_tag comment.design_contributor, :profile_image, :fill, 50, 50 %>
    <%= comment.design_contributor.pen_name %>
  <% end %>
  <%= comment.comment %>
  <%= comment.created_at.strftime('%Y/%m/%d %H:%M') %>
<% end %>
<!-----------------------------------------作品への反応---------------------------------------->
<!---------------オファーモデルは存在するか--------------->
<% if @post.offered_by? %>
  <!-------------交渉中のオファーがあれば表示------------->
  <% if @post.offered_negotiation_by?(@post.id) %>
    <p>このデザインへの反応</p>
    <span>コメント</span>
    <%= @post.comments.count %>件
    <span>オファー</span>
    <span>交渉中</span><br />
    <%= @offer.company.company_name %><span>様と交渉中</span>
    <p>
      現在交渉中の為、こちらのデザインへはオファーができません<br />
      ※交渉不成立となった場合、再度こちらのページからオファーが可能です
    </p>
  <!--------------交渉成立オファーあれば表示-------------->
  <% elsif @post.offered_established_by?(@post.id) %>
    <p>このデザインへの反応</p>
    <span>コメント</span>
    <%= @post.comments.count %>件
    <span>オファー</span>
    <span>交渉成立済み</span><br />
    <%= @offer.company.company_name %><span>様と交渉成立済み</span>
    <p>
      交渉成立済みの為、今後こちらのデザインへはオファーができません<br />
      新たなデザインをお探しください
    </p>
  <!-------------交渉不成立オファーあれば表示------------->
  <% elsif @post.offered_failure_by?(@post.id) %>
    <p>このデザインへの反応</p>
    <span>コメント</span>
    <%= @post.comments.count %>件
    <span>オファー</span>
    <span>交渉不成立</span><%= @offers.count %><span>件</span>
    <span>現在オファー受付中です</span><br />
    <%= link_to new_company_post_offer_path(@post.id) do %>
      <p>商品化の<br />オファーを送る</p>
    <% end %>
  <% end %>
<!----------------オファーモデルが存在しない-------------->
<% else %>
  <p>このデザインへの反応</p>
  <span>コメント</span>
  <%= @post.comments.count %>件
  <span>オファー</span>
  <span>現在オファー受付中です</span>
  <%= link_to new_company_post_offer_path(@post.id) do %>
    <p>商品化の<br />オファーを送る</p>
  <% end %>
<% end %>
<!------------------------------------------------------------->
<p>ステキなデザインを見つけたら<br />ぜひ商品化のオファーを送ってください♪</p>
<%= link_to "デザイン一覧に戻る", company_posts_path %>